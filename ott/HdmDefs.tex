% generated by Ott 0.32 from: /home/roger/hdm/ott/HdmDefs.ott
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{index} ,\, \ottmv{in} ,\, \ottmv{out} $ &  \\
 $ \mathit{termvar} ,\, \mathit{x} ,\, \mathit{y} $ & \ottcom{term variable} \\
 $ \ottmv{dskvar} ,\, a ,\, b $ & \ottcom{Skolem variable} \\
 $ \ottmv{skvar} ,\, \widehat{ \text{a} } ,\, \widehat{ \text{b} } $ & \ottcom{Skolem variable} \\
 $ \ottmv{exvar} ,\, \widehat{\alpha} ,\, \widehat{\beta} $ & \ottcom{existential variable} \\
}}

\newcommand{\otte}{
\ottrulehead{\ottnt{e}}{::=}{\ottcom{Terms}}\ottprodnewline
\ottfirstprodline{|}{\mathit{x}}{}{}{}{\ottcom{Term variable}}\ottprodnewline
\ottprodline{|}{\texttt{unit}}{}{}{}{\ottcom{Term unit}}\ottprodnewline
\ottprodline{|}{\ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}}{}{}{}{\ottcom{Application}}\ottprodnewline
\ottprodline{|}{\lambda  \mathit{x}  \ottsym{.}  \ottnt{e}}{}{\textsf{bind}\; \mathit{x}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{Abstraction}}\ottprodnewline
\ottprodline{|}{\textbf{let} \, \mathit{x}  \ottsym{=}  \ottnt{e_{{\mathrm{1}}}} \, \textbf{in} \, \ottnt{e_{{\mathrm{2}}}}}{}{\textsf{bind}\; \mathit{x}\; \textsf{in}\; \ottnt{e_{{\mathrm{2}}}}}{}{\ottcom{Let binding}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{e}  \ottsym{)}} {\textsf{S}}{}{}{\ottcom{Parenthesis}}}

\newcommand{\ottDTy}{
\ottrulehead{\tau}{::=}{\ottcom{Dec Types}}\ottprodnewline
\ottfirstprodline{|}{a}{}{}{}{\ottcom{Skolem variable}}\ottprodnewline
\ottprodline{|}{\texttt{Unit}}{}{}{}{\ottcom{Unit type}}\ottprodnewline
\ottprodline{|}{\tau_{{\mathrm{1}}}  \to  \tau_{{\mathrm{2}}}}{}{}{}{\ottcom{Function type}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \tau  \ottsym{)}} {\textsf{S}}{}{}{\ottcom{Parenthesis}}}

\newcommand{\ottDSch}{
\ottrulehead{\sigma}{::=}{\ottcom{Dec Type schemes}}\ottprodnewline
\ottfirstprodline{|}{\tau}{}{}{}{\ottcom{Monotype}}\ottprodnewline
\ottprodline{|}{\forall \, a  \ottsym{.}  \sigma}{}{\textsf{bind}\; a\; \textsf{in}\; \sigma}{}{\ottcom{Forall}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \tau  \ottsym{/}  a  \ottsym{]}  \sigma} {\textsf{M}}{}{}{\ottcom{Skolem substitution}}}

\newcommand{\ottTy}{
\ottrulehead{T}{::=}{\ottcom{Types}}\ottprodnewline
\ottfirstprodline{|}{\widehat{ \text{a} }}{}{}{}{\ottcom{Skolem variable}}\ottprodnewline
\ottprodline{|}{\widehat{\alpha}}{}{}{}{\ottcom{Existential variable}}\ottprodnewline
\ottprodline{|}{\texttt{Unit}}{}{}{}{\ottcom{Unit type}}\ottprodnewline
\ottprodline{|}{T_{{\mathrm{1}}}  \to  T_{{\mathrm{2}}}}{}{}{}{\ottcom{Function type}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  T  \ottsym{)}} {\textsf{S}}{}{}{\ottcom{Parenthesis}}}

\newcommand{\ottSch}{
\ottrulehead{S}{::=}{\ottcom{Type schemes}}\ottprodnewline
\ottfirstprodline{|}{T}{}{}{}{\ottcom{Monotype}}\ottprodnewline
\ottprodline{|}{\forall \, \widehat{ \text{a} }  \ottsym{.}  S}{}{\textsf{bind}\; \widehat{ \text{a} }\; \textsf{in}\; S}{}{\ottcom{Forall}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  T  \ottsym{/}  \widehat{\alpha}  \ottsym{]}  S} {\textsf{M}}{}{}{\ottcom{Existential substitution}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  T  \ottsym{/}  \widehat{ \text{a} }  \ottsym{]}  S} {\textsf{M}}{}{}{\ottcom{Skolem substitution}}\ottprodnewline
\ottprodline{|}{\theta \, S} {\textsf{M}}{}{}{\ottcom{Instatiation substitution}}}

\newcommand{\ottDA}{
\ottrulehead{\overline{a}}{::=}{\ottcom{Decl Skolem variable list}}\ottprodnewline
\ottfirstprodline{|}{\bullet} {\textsf{M}}{}{}{\ottcom{Empty environment}}\ottprodnewline
\ottprodline{|}{\overline{a}  \ottsym{;}  a} {\textsf{M}}{}{}{\ottcom{Cons existential}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \overline{a}  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{Parenthesis}}\ottprodnewline
\ottprodline{|}{\langle  a  \rangle} {\textsf{M}}{}{}{\ottcom{Singleton}}\ottprodnewline
\ottprodline{|}{\overline{a}_{{\mathrm{1}}}  \doubleplus  \overline{a}_{{\mathrm{2}}}} {\textsf{M}}{}{}{\ottcom{Append}}}

\newcommand{\ottDObj}{
\ottrulehead{o}{::=}{\ottcom{Objects}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{[}  \overline{a}  \ottsym{]}  \sigma}{}{}{}{\ottcom{Scheme}}}

\newcommand{\ottDEnv}{
\ottrulehead{\Gamma}{::=}{\ottcom{Dec Environment}}\ottprodnewline
\ottfirstprodline{|}{\bullet}{}{}{}{\ottcom{Empty environment}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{;}  a}{}{}{}{\ottcom{Cons Sk}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{;}  \mathit{x}  \ottsym{:}  \sigma}{}{}{}{\ottcom{Cons Variable}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{;}  \ottsym{\{}  o  \ottsym{\}}}{}{}{}{\ottcom{Cons Object}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{;}  \overline{a}} {\textsf{M}}{}{}{\ottcom{Cons DA}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \Gamma  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{Parenthesis}}\ottprodnewline
\ottprodline{|}{\langle  a  \rangle} {\textsf{M}}{}{}{\ottcom{Singleton Sk}}\ottprodnewline
\ottprodline{|}{\langle  \overline{a}  \rangle} {\textsf{M}}{}{}{\ottcom{Singleton DA}}\ottprodnewline
\ottprodline{|}{\langle  \mathit{x}  \ottsym{:}  \sigma  \rangle} {\textsf{M}}{}{}{\ottcom{Singleton Var}}\ottprodnewline
\ottprodline{|}{\langle  \ottsym{\{}  o  \ottsym{\}}  \rangle} {\textsf{M}}{}{}{\ottcom{Singleton Obj}}\ottprodnewline
\ottprodline{|}{\Gamma_{{\mathrm{1}}}  \ottsym{+}  \Gamma_{{\mathrm{2}}}} {\textsf{M}}{}{}{\ottcom{Environment append}}}

\newcommand{\ottObj}{
\ottrulehead{O}{::=}{\ottcom{Objects}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{[}  A  \ottsym{]}  S}{}{}{}{\ottcom{Scheme}}\ottprodnewline
\ottprodline{|}{S} {\textsf{M}}{}{}{\ottcom{Scheme without A}}}

\newcommand{\ottA}{
\ottrulehead{A}{::=}{\ottcom{Existential environment}}\ottprodnewline
\ottfirstprodline{|}{\bullet} {\textsf{M}}{}{}{\ottcom{Empty environment}}\ottprodnewline
\ottprodline{|}{A  \ottsym{;}  \widehat{\alpha}} {\textsf{M}}{}{}{\ottcom{Cons existential}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  A  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{Parenthesis}}\ottprodnewline
\ottprodline{|}{\langle  \widehat{\alpha}  \rangle} {\textsf{M}}{}{}{\ottcom{Singleton}}\ottprodnewline
\ottprodline{|}{\langle  \widehat{\alpha}  \ottsym{;}  \widehat{\beta}  \rangle} {\textsf{M}}{}{}{\ottcom{Singleton}}\ottprodnewline
\ottprodline{|}{A_{{\mathrm{1}}}  \doubleplus  A_{{\mathrm{2}}}} {\textsf{M}}{}{}{\ottcom{Existential Environment append}}}

\newcommand{\ottEnv}{
\ottrulehead{\Psi}{::=}{\ottcom{Environment}}\ottprodnewline
\ottfirstprodline{|}{\bullet}{}{}{}{\ottcom{Empty environment}}\ottprodnewline
\ottprodline{|}{\Psi  \ottsym{;}  \widehat{ \text{a} }}{}{}{}{\ottcom{Cons Skolem variable}}\ottprodnewline
\ottprodline{|}{\Psi  \ottsym{;}  A}{}{}{}{\ottcom{Cons Existential environment}}\ottprodnewline
\ottprodline{|}{\Psi  \ottsym{;}  \mathit{x}  \ottsym{:}  S}{}{}{}{\ottcom{Cons Variable}}\ottprodnewline
\ottprodline{|}{\Psi  \ottsym{;}  \ottsym{\{}  O  \ottsym{\}}}{}{}{}{\ottcom{Cons Object}}\ottprodnewline
\ottprodline{|}{\langle  A  \rangle} {\textsf{S}}{}{}{\ottcom{Singleton A}}\ottprodnewline
\ottprodline{|}{\langle  \mathit{x}  \ottsym{:}  S  \rangle} {\textsf{S}}{}{}{\ottcom{Singleton X}}\ottprodnewline
\ottprodline{|}{\langle  \ottsym{\{}  O  \ottsym{\}}  \rangle} {\textsf{S}}{}{}{\ottcom{Singleton X}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \Psi  \ottsym{)}} {\textsf{S}}{}{}{\ottcom{Parenthesis}}\ottprodnewline
\ottprodline{|}{\Psi_{{\mathrm{1}}}  \ottsym{+}  \Psi_{{\mathrm{2}}}} {\textsf{M}}{}{}{\ottcom{Environment append}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  T  \ottsym{/}  \widehat{\alpha}  \ottsym{]}  \Psi} {\textsf{M}}{}{}{\ottcom{Substitution}}\ottprodnewline
\ottprodline{|}{\gamma \, \Psi} {\textsf{M}}{}{}{\ottcom{Substitution}}}

\newcommand{\ottEqs}{
\ottrulehead{E}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\bullet}{}{}{}{\ottcom{Empty equaltities}}\ottprodnewline
\ottprodline{|}{T_{{\mathrm{1}}} \, \sim \, T_{{\mathrm{2}}}  \ottsym{;}  E}{}{}{}{\ottcom{Cons Equality}}\ottprodnewline
\ottprodline{|}{\langle  T_{{\mathrm{1}}} \, \sim \, T_{{\mathrm{2}}}  \rangle} {\textsf{S}}{}{}{\ottcom{Singleton}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  T  \ottsym{/}  \widehat{\alpha}  \ottsym{]}  E} {\textsf{M}}{}{}{\ottcom{Substitution}}\ottprodnewline
\ottprodline{|}{\gamma \, E} {\textsf{M}}{}{}{\ottcom{Substitution'}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  T_{{\mathrm{1}}} \, \sim \, T_{{\mathrm{2}}}  \ottsym{)}  \ottsym{;}  E} {\textsf{M}}{}{}{\ottcom{Parenthesis}}}

\newcommand{\ottSub}{
\ottrulehead{\gamma}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\bullet}{}{}{}{\ottcom{Empty substitution}}\ottprodnewline
\ottprodline{|}{\gamma \, \circ \, \ottsym{[}  T  \ottsym{/}  \widehat{\alpha}  \ottsym{]}}{}{}{}{\ottcom{Cons substitution}}\ottprodnewline
\ottprodline{|}{ \lbrack  T  /  \widehat{\alpha}  \rbrack } {\textsf{M}}{}{}{\ottcom{Singleton}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \gamma  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{Parenthesis}}\ottprodnewline
\ottprodline{|}{\gamma_{{\mathrm{1}}}  \ottsym{+}  \gamma_{{\mathrm{2}}}} {\textsf{M}}{}{}{\ottcom{Append}}}

\newcommand{\ottDSub}{
\ottrulehead{\theta}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\bullet}{}{}{}{\ottcom{Empty substitution}}\ottprodnewline
\ottprodline{|}{\theta \, \circ \, \ottsym{[}  \tau  \ottsym{/}  \widehat{\alpha}  \ottsym{]}}{}{}{}{\ottcom{Cons substitution}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \theta  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{Parenthesis}}\ottprodnewline
\ottprodline{|}{\theta_{{\mathrm{1}}}  \ottsym{+}  \theta_{{\mathrm{2}}}} {\textsf{M}}{}{}{\ottcom{Append}}}

\newcommand{\ottterminals}{
\ottrulehead{\ottnt{terminals}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \lambda }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Lambda }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \longrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \to }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \leadsto }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \bullet }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \textbf{let} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \textbf{in} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{unit} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{Unit} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \forall }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \forall }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{.}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \models }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash_{\widehat{\texttt{ty} } } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash_\texttt{ty} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Vdash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Vdash_\texttt{mono} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Vdash_\texttt{poly} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \dashv }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \VdashR }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \sim }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \leq }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \langle }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \rangle }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \hookrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \circ }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \doubleplus }{}{}{}{}}

\newcommand{\ottformula}{
\ottrulehead{\ottnt{formula}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{judgement}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{gen}( \sigma_{{\mathrm{2}}} ,  \overline{a} )  =  \sigma_{{\mathrm{1}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{gen( S_{{\mathrm{2}}} ,  A ) } =  S_{{\mathrm{1}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ S_{{\mathrm{1}}}  =  S_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Psi_{{\mathrm{1}}}  =  \Psi_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ a  \in  \Gamma }{}{}{}{}\ottprodnewline
\ottprodline{|}{ a  \not\in  \Gamma }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathit{x}  :  \sigma  \not\in  \Gamma }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \widehat{ \text{a} }  \in  \Psi }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \widehat{\alpha}  \in  \Psi }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \widehat{\alpha}  \#  \Psi }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathit{x}  :  S  \in  \Psi }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \widehat{\alpha}  \not\in fv_{ \widehat{\alpha} }( T ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{\sigma \, \hookrightarrow \, S}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vspace{-1em} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vspace{-1em} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vspace{-1em} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vspace{-1em} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vspace{-1em} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vspace{-1em} }{}{}{}{}}

\newcommand{\ottDecHelpers}{
\ottrulehead{\ottnt{DecHelpers}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\overline{a}  \ottsym{\#}  \Gamma}{}{}{}{\ottcom{DA freshness}}}

\newcommand{\ottDecTyping}{
\ottrulehead{\ottnt{DecTyping}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma  \Vdash_\texttt{mono}  \ottnt{e}  \ottsym{:}  \tau}{}{}{}{\ottcom{Mono Term Typing}}\ottprodnewline
\ottprodline{|}{\Gamma  \Vdash_\texttt{poly}  \ottnt{e}  \ottsym{:}  \sigma}{}{}{}{\ottcom{Poly Term Typing}}\ottprodnewline
\ottprodline{|}{\Gamma  \vdash_\texttt{ty}  \sigma}{}{}{}{\ottcom{Dec Type Well-formedness}}\ottprodnewline
\ottprodline{|}{ \texttt{wf}~( \Gamma ) }{}{}{}{\ottcom{Scoping/Typing Environment Well-formedness}}\ottprodnewline
\ottprodline{|}{\Gamma  \Vdash  \sigma_{{\mathrm{1}}}  \leq  \sigma_{{\mathrm{2}}}}{}{}{}{\ottcom{Type subsumption}}}

\newcommand{\ottAFreshNess}{
\ottrulehead{\ottnt{AFreshNess}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{A  \ottsym{\#}  \Psi}{}{}{}{\ottcom{A freshness}}}

\newcommand{\ottAlgorithmicSystem}{
\ottrulehead{\ottnt{AlgorithmicSystem}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Psi_{\ottmv{in}}  \vdash  \ottnt{e}  \ottsym{:}  \ottsym{[}  A  \ottsym{]}  T  \dashv  \Psi_{\ottmv{out}}}{}{}{}{\ottcom{Type Inference}}\ottprodnewline
\ottprodline{|}{\Psi_{{\mathrm{1}}}  \vdash  \ottnt{e}  \ottsym{:}  S  \dashv  \Psi_{{\mathrm{2}}}}{}{}{}{\ottcom{Generalization}}\ottprodnewline
\ottprodline{|}{\Psi  \vdash  S  \leq  \ottsym{[}  A  \ottsym{]}  T}{}{}{}{\ottcom{Polymorhpic Type Instantiation}}\ottprodnewline
\ottprodline{|}{\Psi_{{\mathrm{1}}}  \vdash  E  \dashv  \Psi_{{\mathrm{2}}}}{}{}{}{\ottcom{Unification Algorithm}}\ottprodnewline
\ottprodline{|}{\Psi_{\ottmv{in}}  \vdash  E  \dashv  \Psi_{\ottmv{out}}  \ottsym{,}  \gamma}{}{}{}{\ottcom{Unification Algorithm with substutution}}\ottprodnewline
\ottprodline{|}{ \begin{array}{l}  \Psi_{{\mathrm{1}}}  \vdash  E_{{\mathrm{1}}}  \rightarrow \\  \Psi_{{\mathrm{2}}}  \vdash  E_{{\mathrm{2}}} ,  \gamma  \end{array} }{}{}{}{\ottcom{Unification Algorithm (Single-step)}}}

\newcommand{\ottWFAlgorithmic}{
\ottrulehead{\ottnt{WFAlgorithmic}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Psi  \vdash_{\widehat{\texttt{ty} } }  S}{}{}{}{\ottcom{Type Well-formedness}}\ottprodnewline
\ottprodline{|}{ \widehat{\texttt{wf} }~( \Psi ) }{}{}{}{\ottcom{Scoping/Typing Environment Well-formedness}}}

\newcommand{\ottEnvironmentInstantiation}{
\ottrulehead{\ottnt{EnvironmentInstantiation}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma_{\ottmv{in}}  \ottsym{,}  \theta_{\ottmv{in}}  \vdash  A  \leadsto  \overline{a}  \ottsym{,}  \theta}{}{}{}{\ottcom{A instantiation}}\ottprodnewline
\ottprodline{|}{\Gamma_{\ottmv{in}}  \ottsym{,}  \theta_{\ottmv{in}}  \vdash  \Psi  \leadsto  \Gamma  \ottsym{,}  \theta}{}{}{}{\ottcom{Environment instantiation}}}

\newcommand{\ottjudgement}{
\ottrulehead{\ottnt{judgement}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{DecHelpers}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{DecTyping}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{AFreshNess}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{AlgorithmicSystem}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{WFAlgorithmic}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{EnvironmentInstantiation}}{}{}{}{}}

\newcommand{\ottuserXXsyntax}{
\ottrulehead{\ottnt{user\_syntax}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{index}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{termvar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{dskvar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{skvar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{exvar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\tau}{}{}{}{}\ottprodnewline
\ottprodline{|}{\sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{T}{}{}{}{}\ottprodnewline
\ottprodline{|}{S}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{o}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{O}{}{}{}{}\ottprodnewline
\ottprodline{|}{A}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Psi}{}{}{}{}\ottprodnewline
\ottprodline{|}{E}{}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\theta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{terminals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{formula}}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\otte\ottinterrule
\ottDTy\ottinterrule
\ottDSch\ottinterrule
\ottTy\ottinterrule
\ottSch\ottinterrule
\ottDA\ottinterrule
\ottDObj\ottinterrule
\ottDEnv\ottinterrule
\ottObj\ottinterrule
\ottA\ottinterrule
\ottEnv\ottinterrule
\ottEqs\ottinterrule
\ottSub\ottinterrule
\ottDSub\ottinterrule
\ottterminals\ottinterrule
\ottformula\ottinterrule
\ottDecHelpers\ottinterrule
\ottDecTyping\ottinterrule
\ottAFreshNess\ottinterrule
\ottAlgorithmicSystem\ottinterrule
\ottWFAlgorithmic\ottinterrule
\ottEnvironmentInstantiation\ottinterrule
\ottjudgement\ottinterrule
\ottuserXXsyntax\ottafterlastrule
}}

% defnss
% defns DecHelpers
%% defn DFrA
\newcommand{\ottdruleDFrANil}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
}{
\bullet  \ottsym{\#}  \Gamma}{%
{\ottdrulename{DFrANil}}{}%
}}


\newcommand{\ottdruleDFrACons}[1]{\ottdrule[#1]{%
\ottpremise{\overline{a}  \ottsym{\#}  \Gamma}%
\ottpremise{ a  \not\in  \Gamma  \ottsym{;}  \overline{a} }%
}{
\overline{a}  \ottsym{;}  a  \ottsym{\#}  \Gamma}{%
{\ottdrulename{DFrACons}}{}%
}}

\newcommand{\ottdefnDFrA}[1]{\begin{ottdefnblock}[#1]{$\overline{a}  \ottsym{\#}  \Gamma$}{\ottcom{DA freshness}}
\ottusedrule{\ottdruleDFrANil{}}
\ottusedrule{\ottdruleDFrACons{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsDecHelpers}{
\ottdefnDFrA{}}

% defns DecTyping
%% defn TmMon
\newcommand{\ottdruleTmVar}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{x}  :  \sigma  \not\in  \Gamma }%
\ottpremise{\Gamma  \Vdash  \sigma  \leq  \tau}%
}{
\Gamma  \Vdash_\texttt{mono}  \mathit{x}  \ottsym{:}  \tau}{%
{\ottdrulename{TmVar}}{}%
}}


\newcommand{\ottdruleTmUnit}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
}{
\Gamma  \Vdash_\texttt{mono}  \texttt{unit}  \ottsym{:}  \texttt{Unit}}{%
{\ottdrulename{TmUnit}}{}%
}}


\newcommand{\ottdruleTmAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash_\texttt{ty}  \tau_{{\mathrm{1}}}}%
\ottpremise{\Gamma  \ottsym{;}  \mathit{x}  \ottsym{:}  \tau_{{\mathrm{1}}}  \Vdash_\texttt{mono}  \ottnt{e}  \ottsym{:}  \tau_{{\mathrm{2}}}}%
}{
\Gamma  \Vdash_\texttt{mono}  \lambda  \mathit{x}  \ottsym{.}  \ottnt{e}  \ottsym{:}  \tau_{{\mathrm{1}}}  \to  \tau_{{\mathrm{2}}}}{%
{\ottdrulename{TmAbs}}{}%
}}


\newcommand{\ottdruleTmApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \Vdash_\texttt{mono}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{:}  \tau_{{\mathrm{1}}}  \to  \tau_{{\mathrm{2}}}}%
\ottpremise{\Gamma  \Vdash_\texttt{mono}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \tau_{{\mathrm{1}}}}%
}{
\Gamma  \Vdash_\texttt{mono}  \ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \tau_{{\mathrm{2}}}}{%
{\ottdrulename{TmApp}}{}%
}}


\newcommand{\ottdruleTmLet}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \Vdash_\texttt{poly}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{:}  \sigma}%
\ottpremise{\Gamma  \ottsym{;}  \mathit{x}  \ottsym{:}  \sigma  \Vdash_\texttt{mono}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \tau}%
}{
\Gamma  \Vdash_\texttt{mono}  \ottsym{(}  \textbf{let} \, \mathit{x}  \ottsym{=}  \ottnt{e_{{\mathrm{1}}}} \, \textbf{in} \, \ottnt{e_{{\mathrm{2}}}}  \ottsym{)}  \ottsym{:}  \tau}{%
{\ottdrulename{TmLet}}{}%
}}

\newcommand{\ottdefnTmMon}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \Vdash_\texttt{mono}  \ottnt{e}  \ottsym{:}  \tau$}{\ottcom{Mono Term Typing}}
\ottusedrule{\ottdruleTmVar{}}
\ottusedrule{\ottdruleTmUnit{}}
\ottusedrule{\ottdruleTmAbs{}}
\ottusedrule{\ottdruleTmApp{}}
\ottusedrule{\ottdruleTmLet{}}
\end{ottdefnblock}}

%% defn TmDGen
\newcommand{\ottdruleTmGen}[1]{\ottdrule[#1]{%
\ottpremise{\overline{a}  \ottsym{\#}  \Gamma}%
\ottpremise{\Gamma  \ottsym{;}  \overline{a}  \Vdash_\texttt{mono}  \ottnt{e}  \ottsym{:}  \tau}%
\ottpremise{ \mathsf{gen}( \tau ,  \overline{a} )  =  \sigma }%
}{
\Gamma  \Vdash_\texttt{poly}  \ottnt{e}  \ottsym{:}  \sigma}{%
{\ottdrulename{TmGen}}{}%
}}

\newcommand{\ottdefnTmDGen}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \Vdash_\texttt{poly}  \ottnt{e}  \ottsym{:}  \sigma$}{\ottcom{Poly Term Typing}}
\ottusedrule{\ottdruleTmGen{}}
\end{ottdefnblock}}

%% defn WfDTy
\newcommand{\ottdruleWfDTySk}[1]{\ottdrule[#1]{%
\ottpremise{ a  \in  \Gamma }%
}{
\Gamma  \vdash_\texttt{ty}  a}{%
{\ottdrulename{WfDTySk}}{}%
}}


\newcommand{\ottdruleWfDTyUnit}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
}{
\Gamma  \vdash_\texttt{ty}  \texttt{Unit}}{%
{\ottdrulename{WfDTyUnit}}{}%
}}


\newcommand{\ottdruleWfDTyArr}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash_\texttt{ty}  \tau_{{\mathrm{1}}}}%
\ottpremise{\Gamma  \vdash_\texttt{ty}  \tau_{{\mathrm{2}}}}%
}{
\Gamma  \vdash_\texttt{ty}  \tau_{{\mathrm{1}}}  \to  \tau_{{\mathrm{2}}}}{%
{\ottdrulename{WfDTyArr}}{}%
}}


\newcommand{\ottdruleWfDTyAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  a  \vdash_\texttt{ty}  \sigma}%
}{
\Gamma  \vdash_\texttt{ty}  \forall \, a  \ottsym{.}  \sigma}{%
{\ottdrulename{WfDTyAbs}}{}%
}}

\newcommand{\ottdefnWfDTy}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash_\texttt{ty}  \sigma$}{\ottcom{Dec Type Well-formedness}}
\ottusedrule{\ottdruleWfDTySk{}}
\ottusedrule{\ottdruleWfDTyUnit{}}
\ottusedrule{\ottdruleWfDTyArr{}}
\ottusedrule{\ottdruleWfDTyAbs{}}
\end{ottdefnblock}}

%% defn WfDEnv
\newcommand{\ottdruleWfDEnvNil}[1]{\ottdrule[#1]{%
}{
 \texttt{wf}~( \bullet ) }{%
{\ottdrulename{WfDEnvNil}}{}%
}}


\newcommand{\ottdruleWfDEnvSk}[1]{\ottdrule[#1]{%
\ottpremise{ \texttt{wf}~( \Gamma ) }%
\ottpremise{ a  \not\in  \Gamma }%
}{
 \texttt{wf}~( \Gamma  \ottsym{;}  a ) }{%
{\ottdrulename{WfDEnvSk}}{}%
}}


\newcommand{\ottdruleWfDEnvSch}[1]{\ottdrule[#1]{%
\ottpremise{ \texttt{wf}~( \Gamma ) }%
\ottpremise{\Gamma  \vdash_\texttt{ty}  \sigma}%
}{
 \texttt{wf}~( \Gamma  \ottsym{;}  \mathit{x}  \ottsym{:}  \sigma ) }{%
{\ottdrulename{WfDEnvSch}}{}%
}}

\newcommand{\ottdefnWfDEnv}[1]{\begin{ottdefnblock}[#1]{$ \texttt{wf}~( \Gamma ) $}{\ottcom{Scoping/Typing Environment Well-formedness}}
\ottusedrule{\ottdruleWfDEnvNil{}}
\ottusedrule{\ottdruleWfDEnvSk{}}
\ottusedrule{\ottdruleWfDEnvSch{}}
\end{ottdefnblock}}

%% defn SubSump
\newcommand{\ottdruleSubSumpMono}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \vspace{-1em} }%
}{
\Gamma  \Vdash  \tau  \leq  \tau}{%
{\ottdrulename{SubSumpMono}}{}%
}}


\newcommand{\ottdruleSubSumpSkol}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  a  \Vdash  \sigma_{{\mathrm{1}}}  \leq  \sigma_{{\mathrm{2}}}}%
}{
\Gamma  \Vdash  \sigma_{{\mathrm{1}}}  \leq  \forall \, a  \ottsym{.}  \sigma_{{\mathrm{2}}}}{%
{\ottdrulename{SubSumpSkol}}{}%
}}


\newcommand{\ottdruleSubSumpInst}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash_\texttt{ty}  \tau_{{\mathrm{1}}}}%
\ottpremise{\Gamma  \Vdash  \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{/}  a  \ottsym{]}  \sigma  \leq  \tau_{{\mathrm{2}}}}%
}{
\Gamma  \Vdash  \forall \, a  \ottsym{.}  \sigma  \leq  \tau_{{\mathrm{2}}}}{%
{\ottdrulename{SubSumpInst}}{}%
}}

\newcommand{\ottdefnSubSump}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \Vdash  \sigma_{{\mathrm{1}}}  \leq  \sigma_{{\mathrm{2}}}$}{\ottcom{Type subsumption}}
\ottusedrule{\ottdruleSubSumpMono{}}
\ottusedrule{\ottdruleSubSumpSkol{}}
\ottusedrule{\ottdruleSubSumpInst{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsDecTyping}{
\ottdefnTmMon{}\ottdefnTmDGen{}\ottdefnWfDTy{}\ottdefnWfDEnv{}\ottdefnSubSump{}}

% defns AFreshNess
%% defn FrA
\newcommand{\ottdruleFrANil}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
}{
\bullet  \ottsym{\#}  \Psi}{%
{\ottdrulename{FrANil}}{}%
}}


\newcommand{\ottdruleFrACons}[1]{\ottdrule[#1]{%
\ottpremise{A  \ottsym{\#}  \Psi}%
\ottpremise{ \widehat{\alpha}  \#  \Psi  \ottsym{;}  A }%
}{
A  \ottsym{;}  \widehat{\alpha}  \ottsym{\#}  \Psi}{%
{\ottdrulename{FrACons}}{}%
}}

\newcommand{\ottdefnFrA}[1]{\begin{ottdefnblock}[#1]{$A  \ottsym{\#}  \Psi$}{\ottcom{A freshness}}
\ottusedrule{\ottdruleFrANil{}}
\ottusedrule{\ottdruleFrACons{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsAFreshNess}{
\ottdefnFrA{}}

% defns AlgorithmicSystem
%% defn Inf
\newcommand{\ottdruleInfVar}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{x}  :  S  \in  \Psi }%
\ottpremise{\Psi  \vdash  S  \leq  \ottsym{[}  A  \ottsym{]}  T}%
}{
\Psi  \vdash  \mathit{x}  \ottsym{:}  \ottsym{[}  A  \ottsym{]}  T  \dashv  \Psi}{%
{\ottdrulename{InfVar}}{}%
}}


\newcommand{\ottdruleInfUnit}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
}{
\Psi  \vdash  \texttt{unit}  \ottsym{:}  \ottsym{[}  \bullet  \ottsym{]}  \texttt{Unit}  \dashv  \Psi}{%
{\ottdrulename{InfUnit}}{}%
}}


\newcommand{\ottdruleInfAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \widehat{\alpha}  \#  \Psi_{\ottmv{in}} }%
\ottpremise{\Psi_{\ottmv{in}}  \ottsym{;}  \langle  \widehat{\alpha}  \rangle  \ottsym{;}  \mathit{x}  \ottsym{:}  \widehat{\alpha}  \vdash  \ottnt{e}  \ottsym{:}  \ottsym{[}  A_{{\mathrm{2}}}  \ottsym{]}  T_{{\mathrm{2}}}  \dashv  \Psi_{\ottmv{out}}  \ottsym{;}  A_{{\mathrm{1}}}  \ottsym{;}  \mathit{x}  \ottsym{:}  T_{{\mathrm{1}}}}%
}{
\Psi_{\ottmv{in}}  \vdash  \lambda  \mathit{x}  \ottsym{.}  \ottnt{e}  \ottsym{:}  \ottsym{[}  A_{{\mathrm{1}}}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{]}  T_{{\mathrm{1}}}  \to  T_{{\mathrm{2}}}  \dashv  \Psi_{\ottmv{out}}}{%
{\ottdrulename{InfAbs}}{}%
}}


\newcommand{\ottdruleInfApp}[1]{\ottdrule[#1]{%
\ottpremise{ \widehat{\beta}  \#  \Psi_{{\mathrm{2}}}  \ottsym{;}  \ottsym{(}  A'_{{\mathrm{1}}}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)} }%
\ottpremise{\Psi_{\ottmv{in}}  \vdash  \ottnt{e_{{\mathrm{1}}}}  \ottsym{:}  \ottsym{[}  A_{{\mathrm{1}}}  \ottsym{]}  T  \dashv  \Psi_{{\mathrm{1}}}}%
\ottpremise{\Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{\{}  \ottsym{[}  A_{{\mathrm{1}}}  \ottsym{]}  T  \ottsym{\}}  \vdash  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottsym{[}  A_{{\mathrm{2}}}  \ottsym{]}  T_{{\mathrm{1}}}  \dashv  \Psi_{{\mathrm{2}}}  \ottsym{;}  \ottsym{\{}  \ottsym{[}  A'_{{\mathrm{1}}}  \ottsym{]}  T'  \ottsym{\}}}%
\ottpremise{\Psi_{{\mathrm{2}}}  \ottsym{;}  A'_{{\mathrm{1}}}  \doubleplus  \ottsym{(}  A_{{\mathrm{2}}}  \ottsym{;}  \widehat{\beta}  \ottsym{)}  \ottsym{;}  \ottsym{\{}  \widehat{\beta}  \ottsym{\}}  \vdash  \langle  T' \, \sim \, T_{{\mathrm{1}}}  \to  \widehat{\beta}  \rangle  \dashv  \Psi_{\ottmv{out}}  \ottsym{;}  A_{\ottmv{out}}  \ottsym{;}  \ottsym{\{}  T_{{\mathrm{2}}}  \ottsym{\}}}%
}{
\Psi_{\ottmv{in}}  \vdash  \ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottsym{[}  A_{\ottmv{out}}  \ottsym{]}  T_{{\mathrm{2}}}  \dashv  \Psi_{\ottmv{out}}}{%
{\ottdrulename{InfApp}}{}%
}}


\newcommand{\ottdruleInfLet}[1]{\ottdrule[#1]{%
\ottpremise{\Psi_{\ottmv{in}}  \vdash  \ottnt{e_{{\mathrm{1}}}}  \ottsym{:}  S  \dashv  \Psi}%
\ottpremise{\Psi  \ottsym{;}  \mathit{x}  \ottsym{:}  S  \vdash  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottsym{[}  A_{{\mathrm{2}}}  \ottsym{]}  T_{{\mathrm{2}}}  \dashv  \Psi_{\ottmv{out}}  \ottsym{;}  \mathit{x}  \ottsym{:}  S'}%
}{
\Psi_{\ottmv{in}}  \vdash  \textbf{let} \, \mathit{x}  \ottsym{=}  \ottnt{e_{{\mathrm{1}}}} \, \textbf{in} \, \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottsym{[}  A_{{\mathrm{2}}}  \ottsym{]}  T_{{\mathrm{2}}}  \dashv  \Psi_{\ottmv{out}}}{%
{\ottdrulename{InfLet}}{}%
}}

\newcommand{\ottdefnInf}[1]{\begin{ottdefnblock}[#1]{$\Psi_{\ottmv{in}}  \vdash  \ottnt{e}  \ottsym{:}  \ottsym{[}  A  \ottsym{]}  T  \dashv  \Psi_{\ottmv{out}}$}{\ottcom{Type Inference}}
\ottusedrule{\ottdruleInfVar{}}
\ottusedrule{\ottdruleInfUnit{}}
\ottusedrule{\ottdruleInfAbs{}}
\ottusedrule{\ottdruleInfApp{}}
\ottusedrule{\ottdruleInfLet{}}
\end{ottdefnblock}}

%% defn Gen
\newcommand{\ottdruleInfGen}[1]{\ottdrule[#1]{%
\ottpremise{\Psi_{\ottmv{in}}  \vdash  \ottnt{e}  \ottsym{:}  \ottsym{[}  A  \ottsym{]}  T  \dashv  \Psi_{\ottmv{out}}}%
\ottpremise{ \mathsf{gen( T ,  A ) } =  S }%
}{
\Psi_{\ottmv{in}}  \vdash  \ottnt{e}  \ottsym{:}  S  \dashv  \Psi_{\ottmv{out}}}{%
{\ottdrulename{InfGen}}{}%
}}

\newcommand{\ottdefnGen}[1]{\begin{ottdefnblock}[#1]{$\Psi_{{\mathrm{1}}}  \vdash  \ottnt{e}  \ottsym{:}  S  \dashv  \Psi_{{\mathrm{2}}}$}{\ottcom{Generalization}}
\ottusedrule{\ottdruleInfGen{}}
\end{ottdefnblock}}

%% defn Inst
\newcommand{\ottdruleInstMono}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \vspace{-1em} }%
}{
\Psi  \vdash  T  \leq  \ottsym{[}  \bullet  \ottsym{]}  T}{%
{\ottdrulename{InstMono}}{}%
}}


\newcommand{\ottdruleInstPoly}[1]{\ottdrule[#1]{%
\ottpremise{ \widehat{\alpha}  \#  \Psi }%
\ottpremise{\Psi  \ottsym{;}  \langle  \widehat{\alpha}  \rangle  \vdash  \ottsym{[}  \widehat{\alpha}  \ottsym{/}  \widehat{ \text{a} }  \ottsym{]}  S  \leq  \ottsym{[}  A  \ottsym{]}  T}%
}{
\Psi  \vdash  \forall \, \widehat{ \text{a} }  \ottsym{.}  S  \leq  \ottsym{[}  \langle  \widehat{\alpha}  \rangle  \doubleplus  A  \ottsym{]}  T}{%
{\ottdrulename{InstPoly}}{}%
}}

\newcommand{\ottdefnInst}[1]{\begin{ottdefnblock}[#1]{$\Psi  \vdash  S  \leq  \ottsym{[}  A  \ottsym{]}  T$}{\ottcom{Polymorhpic Type Instantiation}}
\ottusedrule{\ottdruleInstMono{}}
\ottusedrule{\ottdruleInstPoly{}}
\end{ottdefnblock}}

%% defn U
\newcommand{\ottdruleUU}[1]{\ottdrule[#1]{%
\ottpremise{\Psi_{\ottmv{in}}  \vdash  E  \dashv  \Psi_{\ottmv{out}}  \ottsym{,}  \gamma}%
}{
\Psi_{\ottmv{in}}  \vdash  E  \dashv  \Psi_{\ottmv{out}}}{%
{\ottdrulename{UU}}{}%
}}

\newcommand{\ottdefnU}[1]{\begin{ottdefnblock}[#1]{$\Psi_{{\mathrm{1}}}  \vdash  E  \dashv  \Psi_{{\mathrm{2}}}$}{\ottcom{Unification Algorithm}}
\ottusedrule{\ottdruleUU{}}
\end{ottdefnblock}}

%% defn Us
\newcommand{\ottdruleUsNil}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
}{
\Psi  \vdash  \bullet  \dashv  \Psi  \ottsym{,}  \bullet}{%
{\ottdrulename{UsNil}}{}%
}}


\newcommand{\ottdruleUsCons}[1]{\ottdrule[#1]{%
\ottpremise{ \begin{array}{l}  \Psi_{\ottmv{in}}  \vdash  E  \rightarrow \\  \Psi  \vdash  E' ,  \gamma_{{\mathrm{1}}}  \end{array} }%
\ottpremise{\gamma_{{\mathrm{1}}} \, \Psi  \vdash  \gamma_{{\mathrm{1}}} \, E'  \dashv  \Psi_{\ottmv{out}}  \ottsym{,}  \gamma_{{\mathrm{2}}}}%
}{
\Psi_{\ottmv{in}}  \vdash  E  \dashv  \Psi_{\ottmv{out}}  \ottsym{,}  \gamma_{{\mathrm{1}}}  \ottsym{+}  \gamma_{{\mathrm{2}}}}{%
{\ottdrulename{UsCons}}{}%
}}

\newcommand{\ottdefnUs}[1]{\begin{ottdefnblock}[#1]{$\Psi_{\ottmv{in}}  \vdash  E  \dashv  \Psi_{\ottmv{out}}  \ottsym{,}  \gamma$}{\ottcom{Unification Algorithm with substutution}}
\ottusedrule{\ottdruleUsNil{}}
\ottusedrule{\ottdruleUsCons{}}
\end{ottdefnblock}}

%% defn Uss
\newcommand{\ottdruleUssUnit}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
}{
 \begin{array}{l}  \Psi  \vdash  \texttt{Unit} \, \sim \, \texttt{Unit}  \ottsym{;}  E  \rightarrow \\  \Psi  \vdash  E ,  \bullet  \end{array} }{%
{\ottdrulename{UssUnit}}{}%
}}


\newcommand{\ottdruleUssExA}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
}{
 \begin{array}{l}  \Psi  \vdash  \widehat{\alpha} \, \sim \, \widehat{\alpha}  \ottsym{;}  E  \rightarrow \\  \Psi  \vdash  E ,  \bullet  \end{array} }{%
{\ottdrulename{UssExA}}{}%
}}


\newcommand{\ottdruleUssDistrArr}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \vspace{-1em} }%
}{
 \begin{array}{l}  \Psi  \vdash  \ottsym{(}  T_{{\mathrm{1}}}  \to  T_{{\mathrm{2}}}  \ottsym{)} \, \sim \, \ottsym{(}  T_{{\mathrm{3}}}  \to  T_{{\mathrm{4}}}  \ottsym{)}  \ottsym{;}  E  \rightarrow \\  \Psi  \vdash  T_{{\mathrm{1}}} \, \sim \, T_{{\mathrm{3}}}  \ottsym{;}  T_{{\mathrm{2}}} \, \sim \, T_{{\mathrm{4}}}  \ottsym{;}  E ,  \bullet  \end{array} }{%
{\ottdrulename{UssDistrArr}}{}%
}}


\newcommand{\ottdruleUssSplitL}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \widehat{\alpha}  \not\in fv_{ \widehat{\alpha} }( T_{{\mathrm{1}}}  \to  T_{{\mathrm{2}}} ) }%
\ottpremise{\langle  \widehat{\alpha}_{{\mathrm{1}}}  \ottsym{;}  \widehat{\alpha}_{{\mathrm{2}}}  \rangle  \ottsym{\#}  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \ottsym{;}  \widehat{\alpha}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}}%
}{
 \begin{array}{l}  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \ottsym{;}  \widehat{\alpha}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}  \vdash  \widehat{\alpha} \, \sim \, \ottsym{(}  T_{{\mathrm{1}}}  \to  T_{{\mathrm{2}}}  \ottsym{)}  \ottsym{;}  E  \rightarrow \\  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \ottsym{;}  \widehat{\alpha}_{{\mathrm{1}}}  \ottsym{;}  \widehat{\alpha}_{{\mathrm{2}}}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}  \vdash  \ottsym{(}  \widehat{\alpha}_{{\mathrm{1}}}  \to  \widehat{\alpha}_{{\mathrm{2}}} \, \sim \, T_{{\mathrm{1}}}  \to  T_{{\mathrm{2}}}  \ottsym{)}  \ottsym{;}  E ,   \lbrack  \widehat{\alpha}_{{\mathrm{1}}}  \to  \widehat{\alpha}_{{\mathrm{2}}}  /  \widehat{\alpha}  \rbrack   \end{array} }{%
{\ottdrulename{UssSplitL}}{}%
}}


\newcommand{\ottdruleUssSplitR}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \widehat{\alpha}  \not\in fv_{ \widehat{\alpha} }( T_{{\mathrm{1}}}  \to  T_{{\mathrm{2}}} ) }%
\ottpremise{\langle  \widehat{\alpha}_{{\mathrm{1}}}  \ottsym{;}  \widehat{\alpha}_{{\mathrm{2}}}  \rangle  \ottsym{\#}  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \ottsym{;}  \widehat{\alpha}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}}%
}{
 \begin{array}{l}  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \ottsym{;}  \widehat{\alpha}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}  \vdash  \ottsym{(}  T_{{\mathrm{1}}}  \to  T_{{\mathrm{2}}}  \ottsym{)} \, \sim \, \widehat{\alpha}  \ottsym{;}  E  \rightarrow \\  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \ottsym{;}  \widehat{\alpha}_{{\mathrm{1}}}  \ottsym{;}  \widehat{\alpha}_{{\mathrm{2}}}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}  \vdash  \ottsym{(}  T_{{\mathrm{1}}}  \to  T_{{\mathrm{2}}} \, \sim \, \widehat{\alpha}_{{\mathrm{1}}}  \to  \widehat{\alpha}_{{\mathrm{2}}}  \ottsym{)}  \ottsym{;}  E ,   \lbrack  \widehat{\alpha}_{{\mathrm{1}}}  \to  \widehat{\alpha}_{{\mathrm{2}}}  /  \widehat{\alpha}  \rbrack   \end{array} }{%
{\ottdrulename{UssSplitR}}{}%
}}


\newcommand{\ottdruleUssSubExL}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \widehat{\alpha}  \in  \Psi_{{\mathrm{1}}}  \ottsym{;}  A_{{\mathrm{1}}} }%
}{
 \begin{array}{l}  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \ottsym{;}  \widehat{\beta}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}  \vdash  \widehat{\alpha} \, \sim \, \widehat{\beta}  \ottsym{;}  E  \rightarrow \\  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}  \vdash  E ,   \lbrack  \widehat{\alpha}  /  \widehat{\beta}  \rbrack   \end{array} }{%
{\ottdrulename{UssSubExL}}{}%
}}


\newcommand{\ottdruleUssSubExR}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \widehat{\alpha}  \in  \Psi_{{\mathrm{1}}}  \ottsym{;}  A_{{\mathrm{1}}} }%
}{
 \begin{array}{l}  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \ottsym{;}  \widehat{\beta}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}  \vdash  \widehat{\beta} \, \sim \, \widehat{\alpha}  \ottsym{;}  E  \rightarrow \\  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}  \vdash  E ,   \lbrack  \widehat{\alpha}  /  \widehat{\beta}  \rbrack   \end{array} }{%
{\ottdrulename{UssSubExR}}{}%
}}


\newcommand{\ottdruleUssSubUnitAL}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \vspace{-1em} }%
}{
 \begin{array}{l}  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \ottsym{;}  \widehat{\alpha}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}  \vdash  \texttt{Unit} \, \sim \, \widehat{\alpha}  \ottsym{;}  E  \rightarrow \\  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}  \vdash  E ,   \lbrack  \texttt{Unit}  /  \widehat{\alpha}  \rbrack   \end{array} }{%
{\ottdrulename{UssSubUnitAL}}{}%
}}


\newcommand{\ottdruleUssSubUnitAR}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
\ottpremise{ \vspace{-1em} }%
}{
 \begin{array}{l}  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \ottsym{;}  \widehat{\alpha}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}  \vdash  \widehat{\alpha} \, \sim \, \texttt{Unit}  \ottsym{;}  E  \rightarrow \\  \Psi_{{\mathrm{1}}}  \ottsym{;}  \ottsym{(}  A_{{\mathrm{1}}}  \doubleplus  A_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \Psi_{{\mathrm{2}}}  \vdash  E ,   \lbrack  \texttt{Unit}  /  \widehat{\alpha}  \rbrack   \end{array} }{%
{\ottdrulename{UssSubUnitAR}}{}%
}}

\newcommand{\ottdefnUss}[1]{\begin{ottdefnblock}[#1]{$ \begin{array}{l}  \Psi_{{\mathrm{1}}}  \vdash  E_{{\mathrm{1}}}  \rightarrow \\  \Psi_{{\mathrm{2}}}  \vdash  E_{{\mathrm{2}}} ,  \gamma  \end{array} $}{\ottcom{Unification Algorithm (Single-step)}}
\ottusedrule{\ottdruleUssUnit{}}
\ottusedrule{\ottdruleUssExA{}}
\ottusedrule{\ottdruleUssDistrArr{}}
\ottusedrule{\ottdruleUssSplitL{}}
\ottusedrule{\ottdruleUssSplitR{}}
\ottusedrule{\ottdruleUssSubExL{}}
\ottusedrule{\ottdruleUssSubExR{}}
\ottusedrule{\ottdruleUssSubUnitAL{}}
\ottusedrule{\ottdruleUssSubUnitAR{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsAlgorithmicSystem}{
\ottdefnInf{}\ottdefnGen{}\ottdefnInst{}\ottdefnU{}\ottdefnUs{}\ottdefnUss{}}

% defns WFAlgorithmic
%% defn WfTy
\newcommand{\ottdruleWfTySk}[1]{\ottdrule[#1]{%
\ottpremise{ \widehat{ \text{a} }  \in  \Psi }%
}{
\Psi  \vdash_{\widehat{\texttt{ty} } }  \widehat{ \text{a} }}{%
{\ottdrulename{WfTySk}}{}%
}}


\newcommand{\ottdruleWfTyEx}[1]{\ottdrule[#1]{%
\ottpremise{ \widehat{\alpha}  \in  \Psi }%
}{
\Psi  \vdash_{\widehat{\texttt{ty} } }  \widehat{\alpha}}{%
{\ottdrulename{WfTyEx}}{}%
}}


\newcommand{\ottdruleWfTyUnit}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
}{
\Psi  \vdash_{\widehat{\texttt{ty} } }  \texttt{Unit}}{%
{\ottdrulename{WfTyUnit}}{}%
}}


\newcommand{\ottdruleWfTyArr}[1]{\ottdrule[#1]{%
\ottpremise{\Psi  \vdash_{\widehat{\texttt{ty} } }  T_{{\mathrm{1}}}}%
\ottpremise{\Psi  \vdash_{\widehat{\texttt{ty} } }  T_{{\mathrm{2}}}}%
}{
\Psi  \vdash_{\widehat{\texttt{ty} } }  T_{{\mathrm{1}}}  \to  T_{{\mathrm{2}}}}{%
{\ottdrulename{WfTyArr}}{}%
}}


\newcommand{\ottdruleWfTyAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Psi  \ottsym{;}  \widehat{ \text{a} }  \vdash_{\widehat{\texttt{ty} } }  S}%
}{
\Psi  \vdash_{\widehat{\texttt{ty} } }  \forall \, \widehat{ \text{a} }  \ottsym{.}  S}{%
{\ottdrulename{WfTyAbs}}{}%
}}

\newcommand{\ottdefnWfTy}[1]{\begin{ottdefnblock}[#1]{$\Psi  \vdash_{\widehat{\texttt{ty} } }  S$}{\ottcom{Type Well-formedness}}
\ottusedrule{\ottdruleWfTySk{}}
\ottusedrule{\ottdruleWfTyEx{}}
\ottusedrule{\ottdruleWfTyUnit{}}
\ottusedrule{\ottdruleWfTyArr{}}
\ottusedrule{\ottdruleWfTyAbs{}}
\end{ottdefnblock}}

%% defn WfEnv
\newcommand{\ottdruleWfEnvNil}[1]{\ottdrule[#1]{%
}{
 \widehat{\texttt{wf} }~( \bullet ) }{%
{\ottdrulename{WfEnvNil}}{}%
}}


\newcommand{\ottdruleWfEnvA}[1]{\ottdrule[#1]{%
\ottpremise{ \widehat{\texttt{wf} }~( \Psi ) }%
\ottpremise{A  \ottsym{\#}  \Psi}%
}{
 \widehat{\texttt{wf} }~( \Psi  \ottsym{;}  A ) }{%
{\ottdrulename{WfEnvA}}{}%
}}


\newcommand{\ottdruleWfEnvSch}[1]{\ottdrule[#1]{%
\ottpremise{ \widehat{\texttt{wf} }~( \Psi ) }%
\ottpremise{\Psi  \vdash_{\widehat{\texttt{ty} } }  S}%
}{
 \widehat{\texttt{wf} }~( \Psi  \ottsym{;}  \mathit{x}  \ottsym{:}  S ) }{%
{\ottdrulename{WfEnvSch}}{}%
}}


\newcommand{\ottdruleWfEnvObjSch}[1]{\ottdrule[#1]{%
\ottpremise{ \widehat{\texttt{wf} }~( \Psi ) }%
\ottpremise{A  \ottsym{\#}  \Psi}%
\ottpremise{\Psi  \ottsym{;}  A  \vdash_{\widehat{\texttt{ty} } }  S}%
}{
 \widehat{\texttt{wf} }~( \Psi  \ottsym{;}  \ottsym{\{}  \ottsym{[}  A  \ottsym{]}  S  \ottsym{\}} ) }{%
{\ottdrulename{WfEnvObjSch}}{}%
}}

\newcommand{\ottdefnWfEnv}[1]{\begin{ottdefnblock}[#1]{$ \widehat{\texttt{wf} }~( \Psi ) $}{\ottcom{Scoping/Typing Environment Well-formedness}}
\ottusedrule{\ottdruleWfEnvNil{}}
\ottusedrule{\ottdruleWfEnvA{}}
\ottusedrule{\ottdruleWfEnvSch{}}
\ottusedrule{\ottdruleWfEnvObjSch{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsWFAlgorithmic}{
\ottdefnWfTy{}\ottdefnWfEnv{}}

% defns EnvironmentInstantiation
%% defn AInst
\newcommand{\ottdruleAInstNil}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
}{
\Gamma  \ottsym{,}  \theta  \vdash  \bullet  \leadsto  \bullet  \ottsym{,}  \bullet}{%
{\ottdrulename{AInstNil}}{}%
}}


\newcommand{\ottdruleAInstCons}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma_{\ottmv{in}}  \ottsym{,}  \theta_{\ottmv{in}}  \vdash  A  \leadsto  \overline{a}_{{\mathrm{1}}}  \ottsym{,}  \theta}%
\ottpremise{\Gamma_{\ottmv{in}}  \ottsym{;}  \overline{a}_{{\mathrm{1}}}  \doubleplus  \overline{a}_{{\mathrm{2}}}  \vdash_\texttt{ty}  \tau}%
}{
\Gamma_{\ottmv{in}}  \ottsym{,}  \theta_{\ottmv{in}}  \vdash  A  \ottsym{;}  \widehat{\alpha}  \leadsto  \ottsym{(}  \overline{a}_{{\mathrm{1}}}  \doubleplus  \overline{a}_{{\mathrm{2}}}  \ottsym{)}  \ottsym{,}  \theta \, \circ \, \ottsym{[}  \tau  \ottsym{/}  \widehat{\alpha}  \ottsym{]}}{%
{\ottdrulename{AInstCons}}{}%
}}

\newcommand{\ottdefnAInst}[1]{\begin{ottdefnblock}[#1]{$\Gamma_{\ottmv{in}}  \ottsym{,}  \theta_{\ottmv{in}}  \vdash  A  \leadsto  \overline{a}  \ottsym{,}  \theta$}{\ottcom{A instantiation}}
\ottusedrule{\ottdruleAInstNil{}}
\ottusedrule{\ottdruleAInstCons{}}
\end{ottdefnblock}}

%% defn EInst
\newcommand{\ottdruleEInstNil}[1]{\ottdrule[#1]{%
\ottpremise{ \vspace{-1em} }%
}{
\Gamma  \ottsym{,}  \theta  \vdash  \bullet  \leadsto  \bullet  \ottsym{,}  \bullet}{%
{\ottdrulename{EInstNil}}{}%
}}


\newcommand{\ottdruleEInstA}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma_{\ottmv{in}}  \ottsym{,}  \theta_{\ottmv{in}}  \vdash  \Psi  \leadsto  \Gamma  \ottsym{,}  \theta_{{\mathrm{1}}}}%
\ottpremise{\Gamma_{\ottmv{in}}  \ottsym{+}  \Gamma  \ottsym{,}  \theta_{\ottmv{in}}  \ottsym{+}  \theta_{{\mathrm{1}}}  \vdash  A  \leadsto  \overline{a}  \ottsym{,}  \theta_{{\mathrm{2}}}}%
}{
\Gamma_{\ottmv{in}}  \ottsym{,}  \theta_{\ottmv{in}}  \vdash  \Psi  \ottsym{;}  A  \leadsto  \Gamma  \ottsym{;}  \overline{a}  \ottsym{,}  \theta_{{\mathrm{1}}}  \ottsym{+}  \theta_{{\mathrm{2}}}}{%
{\ottdrulename{EInstA}}{}%
}}


\newcommand{\ottdruleEInstSch}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma_{\ottmv{in}}  \ottsym{,}  \theta_{\ottmv{in}}  \vdash  \Psi  \leadsto  \Gamma  \ottsym{,}  \theta}%
\ottpremise{\sigma \, \hookrightarrow \, \ottsym{(}  \theta_{\ottmv{in}}  \ottsym{+}  \theta  \ottsym{)} \, S}%
}{
\Gamma_{\ottmv{in}}  \ottsym{,}  \theta_{\ottmv{in}}  \vdash  \Psi  \ottsym{;}  \mathit{x}  \ottsym{:}  S  \leadsto  \Gamma  \ottsym{;}  \mathit{x}  \ottsym{:}  \sigma  \ottsym{,}  \theta}{%
{\ottdrulename{EInstSch}}{}%
}}


\newcommand{\ottdruleEInstObjSch}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma_{\ottmv{in}}  \ottsym{,}  \theta_{\ottmv{in}}  \vdash  \Psi  \leadsto  \Gamma  \ottsym{,}  \theta}%
\ottpremise{\ottsym{(}  \Gamma_{\ottmv{in}}  \ottsym{+}  \Gamma  \ottsym{)}  \ottsym{,}  \ottsym{(}  \theta_{\ottmv{in}}  \ottsym{+}  \theta  \ottsym{)}  \vdash  A  \leadsto  \overline{a}  \ottsym{,}  \theta'}%
\ottpremise{\sigma \, \hookrightarrow \, \ottsym{(}  \theta_{\ottmv{in}}  \ottsym{+}  \ottsym{(}  \theta  \ottsym{+}  \theta'  \ottsym{)}  \ottsym{)} \, S}%
}{
\Gamma_{\ottmv{in}}  \ottsym{,}  \theta_{\ottmv{in}}  \vdash  \Psi  \ottsym{;}  \ottsym{\{}  \ottsym{[}  A  \ottsym{]}  S  \ottsym{\}}  \leadsto  \Gamma  \ottsym{;}  \ottsym{\{}  \ottsym{[}  \overline{a}  \ottsym{]}  \sigma  \ottsym{\}}  \ottsym{,}  \theta}{%
{\ottdrulename{EInstObjSch}}{}%
}}

\newcommand{\ottdefnEInst}[1]{\begin{ottdefnblock}[#1]{$\Gamma_{\ottmv{in}}  \ottsym{,}  \theta_{\ottmv{in}}  \vdash  \Psi  \leadsto  \Gamma  \ottsym{,}  \theta$}{\ottcom{Environment instantiation}}
\ottusedrule{\ottdruleEInstNil{}}
\ottusedrule{\ottdruleEInstA{}}
\ottusedrule{\ottdruleEInstSch{}}
\ottusedrule{\ottdruleEInstObjSch{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsEnvironmentInstantiation}{
\ottdefnAInst{}\ottdefnEInst{}}

\newcommand{\ottdefnss}{
\ottdefnsDecHelpers
\ottdefnsDecTyping
\ottdefnsAFreshNess
\ottdefnsAlgorithmicSystem
\ottdefnsWFAlgorithmic
\ottdefnsEnvironmentInstantiation
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\newpage 
\ottdefnss}

